2025/06/04 10:25:41 db.go:28: DataBase SQLite successfully connected: ./data/backup.db
2025/06/04 10:25:41 db.go:52: Current DB schema version: 3
2025/06/04 10:25:41 db.go:112: All DB migrations completed.
2025/06/04 10:25:41 main.go:70: 
--- Testing CRUD for users ---
2025/06/04 10:25:41 main.go:72: Create user admin...
2025/06/04 10:25:41 main.go:75: User 'admin' creation error: user insert error 'admin': UNIQUE constraint failed: users.username
2025/06/04 10:25:41 main.go:80: Create user testuser...
2025/06/04 10:25:42 main.go:85: User 'testuser' successfully created: &{3 testuser $2a$10$I0sZQdmEySnF6L8YT8V.k.s38Q2kiqrwtezxutjIeQxO6.QZ6bgx2 {2025-06-04 10:25:42.0286973 +0300 EEST m=+0.324987701 true}}
2025/06/04 10:25:42 main.go:88: Creating existing user 'admin', expecting to reveive error...
2025/06/04 10:25:42 main.go:91: Success: Received expected error during user creation: user insert error 'admin': UNIQUE constraint failed: users.username
2025/06/04 10:25:42 main.go:96: Search for user 'admin'...
2025/06/04 10:25:42 main.go:101: Found user 'admin': &{ID:1 Username:admin PasswordHash:$2a$10$YZ9jMh4lYYjXSZWpm72dn.bQ82RubX9fXZJG4JZjNQaZ3KlZgBJv2 CreatedAt:{Time:2025-06-03 15:29:16.173 +0000 UTC Valid:true}}
2025/06/04 10:25:42 main.go:104: Search for nonexistent user....
2025/06/04 10:25:42 main.go:107: Success: Received expected error during nonexistent user search: user 'nonexistent' not found
2025/06/04 10:25:42 main.go:112: User 'admin' authentication with right password...
2025/06/04 10:25:42 main.go:117: User 'admin' authentication successfull: &{ID:1 Username:admin PasswordHash:$2a$10$YZ9jMh4lYYjXSZWpm72dn.bQ82RubX9fXZJG4JZjNQaZ3KlZgBJv2 CreatedAt:{Time:2025-06-03 15:29:16.173 +0000 UTC Valid:true}}
2025/06/04 10:25:42 main.go:120: User 'admin' authentication with wrong password, expected error...
2025/06/04 10:25:42 main.go:123: Successfull: Received expected authentication error for 'admin' with wrong password: wrong password for user 'admin'
2025/06/04 10:25:42 main.go:129: Update password for user 'testuser'...
2025/06/04 10:25:42 main.go:134: Password for 'testuser' successfully updated. New hash: $2a$1...
2025/06/04 10:25:42 main.go:139: Authentication successfull for 'testuser' with new password.
2025/06/04 10:25:42 main.go:144: Get All users...
2025/06/04 10:25:42 main.go:149: Found 2 users:
2025/06/04 10:25:42 main.go:155:  - ID: 1, Username: admin, CreatedAt: 2025-06-03 15:29:16
2025/06/04 10:25:42 main.go:155:  - ID: 3, Username: testuser, CreatedAt: 2025-06-04 10:25:42
2025/06/04 10:25:42 main.go:160: Delet user 'testuser' (ID: 3)...
2025/06/04 10:25:42 main.go:165: User 'testuser' was deleted successfully.
2025/06/04 10:25:42 main.go:169: Check 'testuser' was deleted...
2025/06/04 10:25:42 main.go:172: Success: User 'testuser' not found after deleting.
2025/06/04 10:25:42 main.go:179: ---End of CRUD testing for user---
2025/06/04 10:25:42 main.go:188: Backup try: E:\test.txt -> E:\BackupData\test_backup\test.txt
2025/06/04 10:25:42 local.go:49: File successfully copy: 'E:\test.txt' -> 'E:\BackupData\test_backup\test.txt' (24 bytes)
2025/06/04 10:25:42 main.go:193: Local backup successfully completed for test file.
2025/06/04 10:25:43 main.go:243: Web Server launch on :8080...
2025/06/04 10:26:44 main.go:256: Received system signal: interrupt. Begin gracefull shutdown...
2025/06/04 10:26:44 main.go:267: Server shutdown gracefully
2025/06/04 10:26:44 main.go:270: Application closed.
2025/06/04 10:26:44 main.go:63: DataBAse connection closed.
2025/06/04 15:35:49 db.go:28: DataBase SQLite successfully connected: ./data/backup.db
2025/06/04 15:35:49 db.go:52: Current DB schema version: 3
2025/06/04 15:35:49 db.go:112: All DB migrations completed.
2025/06/04 15:35:49 main.go:70: 
--- Testing CRUD for users ---
2025/06/04 15:35:49 main.go:72: Create user admin...
2025/06/04 15:35:49 main.go:75: User 'admin' creation error: user insert error 'admin': UNIQUE constraint failed: users.username
2025/06/04 15:35:49 main.go:80: Create user testuser...
2025/06/04 15:35:49 main.go:85: User 'testuser' successfully created: &{4 testuser $2a$10$yhDu32My2j4SJyviVO3xueWuapIl3k5u4sLgf3dZsvkfF17DPzQQ6 {2025-06-04 15:35:49.3189205 +0300 EEST m=+0.262117701 true}}
2025/06/04 15:35:49 main.go:88: Creating existing user 'admin', expecting to reveive error...
2025/06/04 15:35:49 main.go:91: Success: Received expected error during user creation: user insert error 'admin': UNIQUE constraint failed: users.username
2025/06/04 15:35:49 main.go:96: Search for user 'admin'...
2025/06/04 15:35:49 main.go:101: Found user 'admin': &{ID:1 Username:admin PasswordHash:$2a$10$YZ9jMh4lYYjXSZWpm72dn.bQ82RubX9fXZJG4JZjNQaZ3KlZgBJv2 CreatedAt:{Time:2025-06-03 15:29:16.173 +0000 UTC Valid:true}}
2025/06/04 15:35:49 main.go:104: Search for nonexistent user....
2025/06/04 15:35:49 main.go:107: Success: Received expected error during nonexistent user search: user 'nonexistent' not found
2025/06/04 15:35:49 main.go:112: User 'admin' authentication with right password...
2025/06/04 15:35:49 main.go:117: User 'admin' authentication successfull: &{ID:1 Username:admin PasswordHash:$2a$10$YZ9jMh4lYYjXSZWpm72dn.bQ82RubX9fXZJG4JZjNQaZ3KlZgBJv2 CreatedAt:{Time:2025-06-03 15:29:16.173 +0000 UTC Valid:true}}
2025/06/04 15:35:49 main.go:120: User 'admin' authentication with wrong password, expected error...
2025/06/04 15:35:49 main.go:123: Successfull: Received expected authentication error for 'admin' with wrong password: wrong password for user 'admin'
2025/06/04 15:35:49 main.go:129: Update password for user 'testuser'...
2025/06/04 15:35:49 main.go:134: Password for 'testuser' successfully updated. New hash: $2a$1...
2025/06/04 15:35:49 main.go:139: Authentication successfull for 'testuser' with new password.
2025/06/04 15:35:49 main.go:144: Get All users...
2025/06/04 15:35:49 main.go:149: Found 2 users:
2025/06/04 15:35:49 main.go:155:  - ID: 1, Username: admin, CreatedAt: 2025-06-03 15:29:16
2025/06/04 15:35:49 main.go:155:  - ID: 4, Username: testuser, CreatedAt: 2025-06-04 15:35:49
2025/06/04 15:35:49 main.go:160: Delet user 'testuser' (ID: 4)...
2025/06/04 15:35:50 main.go:165: User 'testuser' was deleted successfully.
2025/06/04 15:35:50 main.go:169: Check 'testuser' was deleted...
2025/06/04 15:35:50 main.go:172: Success: User 'testuser' not found after deleting.
2025/06/04 15:35:50 main.go:179: ---End of CRUD testing for user---
2025/06/04 15:35:50 main.go:187: 
--- Testing CRUD for backup tasks ---
2025/06/04 15:35:50 main.go:189: Creates backup task 'Daily Documents backup'...
2025/06/04 15:35:50 main.go:203: Backup task 'Daily Documents Backup' successfully created: ID: 1, Name: Daily Document Backup, Schedule: daily, Created: 2025-06-04 15:35:50.006, Updated: 2025-06-04 15:35:50.006
2025/06/04 15:35:50 main.go:207: Creates backup task 'Weekly Photos Backup'...
2025/06/04 15:35:50 main.go:220: Backup task 'Weekly Photos Backup' successfully created: ID: 2, Name: Weekly Photos Backup, Schedule: weekly, Created: 2025-06-04 15:35:50.067, Updated: 2025-06-04 15:35:50.067
2025/06/04 15:35:50 main.go:226: Trying to create backup task 'Daily Documents backup' which exists
2025/06/04 15:35:50 main.go:229: Success: got expected error during existing task creating: backup job insert error 'Daily Document Backup': UNIQUE constraint failed: backup_jobs.name
2025/06/04 15:35:50 main.go:236: Search for task by ID 1...
2025/06/04 15:35:50 main.go:249: Found task by ID 1: Name: Daily Document Backup, Source: C:\Users\user\Documents, IsActive: true, Created: 2025-06-04 15:35:50.006, Updated: 2025-06-04 15:35:50.006
2025/06/04 15:35:50 main.go:256: Search for task 'Weekly Photos Backup'...
2025/06/04 15:35:50 main.go:269: Found task 'Weekly Photos Backup': ID 2, Name: Weekly Photos Backup, Source: C:\Users\user\Pictures, IsActive: true, Created: 2025-06-04 15:35:50.067, Updated: 2025-06-04 15:35:50.067
2025/06/04 15:35:50 main.go:276: Update task 'Daily Documents Backup' (ID 1) - change schedule and do inactive...
2025/06/04 15:35:50 main.go:288: Task 'Daily Documents Backup' successfully updated. New Schedule: monthly, IsActive: false, Updated: 2025-06-04 15:35:50.123
2025/06/04 15:35:50 main.go:294: Get all backup tasks...
2025/06/04 15:35:50 main.go:299: Found 2 backup tasks:
2025/06/04 15:35:50 main.go:309:  - ID: 1, Name: Daily Document Backup, Active: false, Created: 2025-06-04 15:35:50.006, Updated: 2025-06-04 15:35:50.123
2025/06/04 15:35:50 main.go:309:  - ID: 2, Name: Weekly Photos Backup, Active: true, Created: 2025-06-04 15:35:50.067, Updated: 2025-06-04 15:35:50.067
2025/06/04 15:35:50 main.go:316: Deleting task 'Weekly Photos Backup' (ID: 2)...
2025/06/04 15:35:50 main.go:322: Task 'Weekly Photos Backup' successfully deleted.
2025/06/04 15:35:50 main.go:325: Check that 'Weekly Photos Backup' was deleted...
2025/06/04 15:35:50 main.go:328: Success: task 'Weekly Photos Backup' not found after deleting
2025/06/04 15:35:50 main.go:335: --- end of testing CRUD for tasks ---
2025/06/04 15:35:50 main.go:343: Backup try: E:\test.txt -> E:\BackupData\test_backup\test.txt
2025/06/04 15:35:50 local.go:49: File successfully copy: 'E:\test.txt' -> 'E:\BackupData\test_backup\test.txt' (24 bytes)
2025/06/04 15:35:50 main.go:348: Local backup successfully completed for test file.
2025/06/04 15:35:50 main.go:398: Web Server launch on :8080...
2025/06/04 15:36:08 main.go:411: Received system signal: interrupt. Begin gracefull shutdown...
2025/06/04 15:36:08 main.go:422: Server shutdown gracefully
2025/06/04 15:36:08 main.go:425: Application closed.
2025/06/04 15:36:08 main.go:63: DataBAse connection closed.
